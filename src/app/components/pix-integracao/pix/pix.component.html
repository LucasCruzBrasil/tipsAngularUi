<div class="container">


    <div class="row">
        <div class="col s12 m6">
            <div class="card grey darken-4">
                <div class="card-content white-text">
                    <span class="card-title">Gerar uma Tips :)</span>
                    <p>
                        prencha o formulário para gerar o QR de pagamento.</p>
                </div>
                <div class="card-action">

                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col s12">
            <div class="input-field col s12  card" [formGroup]="formPix">

                <div class="input-field">
                    <i class="material-icons prefix">local_atm</i>
                    <input placeholder="Valor da gorjeta" id="icon_prefix" type="number" class="validate"
                        formControlName="transaction_amount">
                    <label for="icon_prefix"></label>
                    <div *ngIf="formPix.get('transaction_amount')?.errors && formPix.get('transaction_amount').touched"
                        class="alert alert-danger">
                        È preciso informar o valor :)
                    </div>

                </div>

                <div class="input-field">
                    <i class="material-icons prefix">favorite_border</i>
                    <input placeholder="Colaborador" id="icon_prefix" type="text" class="validate"
                        formControlName="description">
                    <label for="icon_prefix"></label>
                    <div *ngIf="formPix.get('description')?.errors && formPix.get('description').touched"
                        class="alert alert-danger">
                        È preciso escolher o colaborador
                    </div>

                </div>
                <div formGroupName="payer">
                    <div class="input-field">
                        <i class="material-icons prefix">card_membership</i>
                        <input placeholder="email" id="icon_prefix" type="email" class="validate"
                            formControlName="email">
                        <label for="icon_prefix"></label>

                        <div *ngIf="formPix.get('payer.email').touched && formPix.get('payer.email')?.errors"
                            class="alert alert-danger">
                            Email invalido
                        </div>
                    </div>


                    <div class="input-field">
                        <i class="material-icons prefix">perm_identity</i>
                        <input placeholder="Nome" id="icon_prefix" type="text" class="validate"
                            formControlName="first_name">
                        <label for="icon_prefix"></label>
                        <div *ngIf="formPix.get('payer.first_name').touched && formPix.get('payer.first_name')?.errors"
                            class="alert alert-danger">
                            Nome obrigatorio
                        </div>
                    </div>

                    <div class="input-field">
                        <i class="material-icons prefix">perm_identity</i>
                        <input placeholder="Sobrenome" id="icon_prefix" type="text" class="validate"
                            formControlName="last_name">
                        <label for="icon_prefix"></label>

                        <div *ngIf="formPix.get('payer.last_name').touched && formPix.get('payer.last_name')?.errors"
                            class="alert alert-danger">
                            Nome obrigatorio
                        </div>
                    </div>

                    <div formGroupName="identification">
                        <div class="input-field">
                            <i class="material-icons prefix">confirmation_number
                            </i>
                            <input id="icon_prefix" placeholder="CPF" type="text" class="validate"
                                formControlName="number">
                            <label for="icon_prefix"></label>

                            <div *ngIf="formPix.get('payer.identification.number').touched && formPix.get('payer.identification.number')?.errors"
                                class="alert alert-danger">
                                CPF invalido
                            </div>
                        </div>

                        <!-- <div class="input-field" style="border: 1px solid red">

                            <input id="icon_prefix"  type="number" class="validate"
                                formControlName="number">
                            <label for="icon_prefix"></label>
                        </div> -->



                        <div class="input-field">
                            <button class="btn waves-effect waves-light black" type="submit" name="action"
                                (click)="gerarQr(pix)" [disabled]="formPix.invalid">Gerar Qr

                                <i class="material-icons right">send</i>
                            </button>

                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!--  <div class="row">
        <div class="col s12 m6">
            <div class="card">
                <img src="data:image/png;base64,{{qr}}">
            </div>

        </div>
    </div> -->

    <div class="row" *ngIf="on">
        <div class="col s12 m7">
            <div class="card">
                <div class="card-image">
                    <img src="data:image/png;base64,{{qr}}">

                </div>
                <div class="card-content">
                    <p>I am a very simple card. I am good at containing small bits of information.
                        I am convenient because I require little markup to use effectively.</p>
                </div>
                <div class="card-action">

                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col s12 m6">
            <div class="card grey darken-4">
                <div class="card-content white-text">
                    <span class="card-title">Lista de Pagamentos :)</span>
                    <p>
                        Pagamentos aprovados .</p>
                </div>
                <div class="responsive-table white-text">
                    <table>
                        <thead>
                          <tr>
                              <th>Nome</th>
                              <th>Valor</th>
                              <th>Data Criação</th>
                              <th>Data Aprovação</th>

                          </tr>
                        </thead>
                
                        <tbody>
                          <tr *ngFor = "let lista of listaPagamentos" >
                            <td>{{lista.description}}</td>
                            <td>${{lista.transaction_amount}}</td>
                            <td>{{lista.date_created}}</td>
                            <td>{{lista.date_approved}}</td>

                          </tr>
                       
                        </tbody>
                      </table>
                </div>
            </div>
        </div>
    </div>
</div>